<?php

namespace Fuzzy\Fuzzification;

/**
 * Generated by PHPUnit_SkeletonGenerator on 2012-11-12 at 00:00:08.
 */
class FuzzificationTest extends \PHPUnit_Framework_TestCase
{

    /**
     * @var Fuzzyfication
     */
    protected $object;

    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    protected function setUp()
    {
        $this->object = new Fuzzification('trapezoid');
    }

    /**
     * Tears down the fixture, for example, closes a network connection.
     * This method is called after a test is executed.
     */
    protected function tearDown()
    {
        $this->object = null;
    }
    
    public function testPertinenceObject()
    {
        $pertinence = $this->readAttribute($this->object, 'pertinence');
        $this->assertInstanceOf('Fuzzy\Fuzzification\Pertinence\Trapezoid', $pertinence);
    }
    
    /**
     * @covers Fuzzy\Fuzzification\FuzzificationAbstract::addCollection
     */
    public function testAddCollection()
    {
        $this->object->addCollection('Tamanho');
        $fuzzyCollection = $this->readAttribute($this->object, 'fuzzyCollection');
        $this->assertSame($fuzzyCollection, array('Tamanho' => array()));
    }
    
    /**
     * @covers Fuzzy\Fuzzification\FuzzificationAbstract::addGroup
     * @dataProvider collectionAndGroupProvider
     */
    public function testAddGroup($collection, $group, $values)
    {
        $object = new Fuzzification('trapezoid');
        $object->addGroup($collection, $group, $values);
        $fuzzyCollection = $this->readAttribute($object, 'fuzzyCollection');
        $this->assertSame($fuzzyCollection['trapezoid'][$group], $values);
        
    }
    
    /**
     * @covers Fuzzy\Fuzzification\FuzzificationAbstract::run
     * @dataProvider collectionAndGroupProvider
     */
    public function testRun($type, $group, $values, $input, $pertinence)
    {
        $groupName = 'Tamanho';
        $object = new Fuzzification($type);
        $object->addGroup($groupName, $group, $values);
        $object->run($input);
        $fuzzyCollection = $object->getFuzzyCollection();        
        $this->assertSame(sprintf("2.f", $fuzzyCollection[$groupName][$group][$type]), sprintf("2.f", $pertinence));
    }
    
    public function collectionAndGroupProvider()
    {
        return array(
            array(
                'trapezoid', 'medio', array(28,30,40,50,60), 34, 0.63
            ),
            array(
                'trapezoid', 'pequeno', array(10,20,30,35), 34, 0.11
            ),
            array(
                'trapezoid', 'grande', array(55,60,70,80,90,100), 34, 0
            )
        );
    }
}
